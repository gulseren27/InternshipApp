@model InternshipApplicationPlatform.Models.ViewModel.Class


@{ ViewBag.Title = "GetListApplication";
    Layout = "~/Views/Shared/_StudentLayout.cshtml"; }


<style>
    .table {
        width: 100%;
        border-collapse: collapse;
    }

        .table th,
        .table td {
            padding: 8px;
            text-align: center;
            border: 1px solid #ddd;
        }

        .table th {
            background-color: #b5b5b578;
            font-weight: bold;
        }

    #basvuru {
        text-align: center;
    }

    .table tr:nth-child(even) {
        background-color: #f9f9f9;
    }

    .table tr:hover {
        background-color: #e2e2e2;
    }

    .btn {
        padding: 5px 10px;
        text-decoration: none;
        border-radius: 3px;
        font-weight: normal;
    }

    .btn-warning {
        background-color: #ffc107;
        color: #fff;
    }

    .btn-primary {
        background-color: #007bff;
        color: #fff;
    }

    .btn-danger {
        background-color: #dc3545;
        color: #fff;
    }
</style>
<br />
<h2 id="basvuru">Başvurularım</h2>
<br />




<table class="table table-hover">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Kurum Ad</th>
            <th scope="col">Staj Tarihi</th>
            <th scope="col">Staj Süresi</th>
            <th style="width:250px;" scope="col">Süreç </th>
            <th scope="col">Durum</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var c in Model.Internships)
            {
                <tr>
                    <td scope="row">1</td>
                    <td>@c.CompanyName </td>
                    <td>@c.InternshipStart - @c.InternshipEnd</td>
                    <td>@c.InternshipTime</td>
                    <td>
                        <div class="progress progress-xs progress-striped active">
                            <div class="progress-bar bg-gradient-blue" style="width: 20%"></div>
                        </div>
                        <span class="badge bg-gradient-blue ">20%</span>
                    </td>
                    <td>
                        <span class="badge badge-dark">Kurum Onayında</span>
                    </td>
                </tr>
                <tr>
                    <td scope="row">2</td>
                    <td>@c.CompanyName </td>
                    <td>@c.InternshipStart - @c.InternshipEnd</td>
                    <td>@c.InternshipTime</td>
                    <td>
                    <td>
                        <div class="progress progress-xs progress-striped active">
                            <div class="progress-bar bg-gradient-cyan" style="width: @c.Status%"></div>
                        </div>
                        <span class="badge bg-gradient-cyan ">@c.Status%</span>
                    </td>
                    <td>
                        @if (c.Status == "Kurum Onayında")
                        {
                            <span class="badge badge-dark">Kurum Onayında</span>
                        }
                        else if (c.Status == "Staj Komitesi B. Onayında")
                        {
                            <span class="badge badge-secondary">Staj Komitesi B. Onayında</span>
                        }
                        else if (c.Status == "Bölüm Başkanı Onayında")
                        {
                            <span class="badge badge-primary">Bölüm Başkanı Onayında</span>
                        }
                        else if (c.Status == "Dekanlık Onayında")
                        {
                            <span class="badge badge-info">Dekanlık Onayında</span>
                        }
                        else if (c.Status == "SKS Onayında")
                        {
                            <span class="badge badge-warning">SKS Onayında</span>
                        }
                        else if (c.Status == "Onaylandı")
                        {
                            <span class="badge badge-success">Onaylandı</span>
                        }
                        else if (c.Status == "Reddedildi")
                        {
                            <span class="badge badge-danger">Reddedildi</span>
                            <span onclick="showPopup()" style="padding-left:20px;" class="badge badge-light">
                                <i class="fas fa-book"></i> Oku
                            </span>
                        }
                    </td>
                </tr>
                <tr>
                    <td scope="row">3</td>
                    <td>Larry the Bird</td>
                    <td>02.07.2020 - 02.10.2020</td>
                    <td>25</td>
                    <td>
                        <div class="progress progress-xs progress-striped active">
                            <div class="progress-bar bg-gradient-fuchsia" style="width: 60%"></div>
                        </div>
                        <span class="badge bg-gradient-fuchsia ">60%</span>
                    </td>
                    <td>
                        <span class="badge badge-primary ">Bölüm Başkanı Onayında</span>
                    </td>
                </tr>
                <tr>
                    <td scope="row">4</td>
                    <td>Larry the Bird</td>
                    <td>02.07.2020 - 02.10.2020</td>
                    <td>25</td>
                    <td>
                        <div class="progress progress-xs progress-striped active">
                            <div class="progress-bar bg-gradient-indigo" style="width: 75%"></div>
                        </div>
                        <span class="badge bg-gradient-indigo ">75%</span>
                    </td>
                    <td>
                        <span class="badge badge-info ">Dekanlık Onayında</span>
                    </td>
                </tr>
                <tr>
                    <td scope="row">5</td>
                    <td>Larry the Bird</td>
                    <td>02.07.2020 - 02.10.2020</td>
                    <td>25</td>
                    <td>
                        <div class="progress progress-xs progress-striped active">
                            <div class="progress-bar bg-gradient-success" style="width: 100%"></div>
                        </div>
                        <span class="badge bg-gradient-success ">100%</span>
                    </td>
                    <td>
                        <span class="badge badge-success ">Onaylandı</span>
                    </td>
                </tr>
                <tr>
                    <td scope="row">6</td>
                    <td>Larry the Bird</td>
                    <td>02.07.2020 - 02.10.2020</td>
                    <td>25</td>
                    <td>
                        <div class="progress progress-xs progress-striped active">
                            <div class="progress-bar bg-gradient-yellow" style="width: 90%"></div>
                        </div>
                        <span class="badge bg-gradient-yellow ">90%</span>
                    </td>
                    <td>
                        <span class="badge badge-warning ">SKS Onayında</span>
                    </td>
                </tr>
                <tr>
                    <td scope="row"></td>
                    <td>Larry the Bird</td>
                    <td>02.07.2020 - 02.10.2020</td>
                    <td>25</td>
                    <td>
                        <div class="progress progress-xs progress-striped active">
                            <div class="progress-bar bg-gradient-danger" style="width: 100%"></div>
                        </div>
                        <span class="badge bg-gradient-danger ">100%</span>
                    </td>
                    <td>
                        <span class="badge badge-danger ">Reddedildi </span><span onclick="showPopup()" style="padding-left:20px;" class="badge badge-light "><i class="fas fa-book"></i>Oku</span>
                    </td>
                </tr>
            }
        
            </tbody>
        </table>


        <a href="/Student/NewApplication" class="btn btn-info">Yeni Başvuru Yap</a>


        <script>
            function showPopup() {
                // Popup içeriğini oluştur
                var popupContent = "<div style='text-align: center;'> <p> Staj başvurunuz 2023 - 2024 akademik takvimine göre eğitim - öğretim tarihiyle çakıştığı için reddedilmiştir. Üniversitemiz senato kararına göre eğitim-öğretim tarihi içerisinde staj yapılamaz.</p ><br> <button onclick='closePopup()'style='padding: 5px 10px; border-radius: 3px; background-color: #dc3545; color: #fff; border: none; cursor: pointer;'>Kapat</button></div> ";

                // Popup penceresini oluştur
                var popup = document.createElement('div');
                popup.classList.add('popup');
                popup.innerHTML = popupContent;

                // Sayfa içeriğine popup penceresini ekle
                document.body.appendChild(popup);

                // Popup penceresini sayfanın ortasına yerleştir
                var popupStyle = popup.style;
                popupStyle.position = 'fixed';
                popupStyle.top = '50%';
                popupStyle.left = '50%';
                popupStyle.transform = 'translate(-50%, -50%)';
                popupStyle.backgroundColor = '#fff';
                popupStyle.padding = '20px';
                popupStyle.border = '2px solid #ccc';
                popupStyle.borderRadius = '5px';
                popupStyle.zIndex = '9999'; // Sayfanın içeriğinden üstte olmasını sağlar
            }

            function closePopup() {
                var popup = document.querySelector('.popup');
                popup.parentNode.removeChild(popup);
            }
        </script>
